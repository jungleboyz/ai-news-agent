<!-- Add Source Form -->
<div class="bg-cyber-card rounded-lg p-4 border border-gray-800/50 mb-4">
    <div class="flex gap-3 items-end">
        <div class="flex-1">
            <label class="block text-xs text-slate-400 mb-1">Feed URL</label>
            <input type="url" id="add-url-{{ type_name }}" placeholder="https://example.com/feed.xml"
                class="w-full bg-cyber-darker border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-neon-cyan focus:outline-none"
                onkeydown="if(event.key==='Enter') addFeed('{{ type_name }}')">
        </div>
        <div class="w-48">
            <label class="block text-xs text-slate-400 mb-1">Name (optional)</label>
            <input type="text" id="add-name-{{ type_name }}" placeholder="Auto-detected"
                class="w-full bg-cyber-darker border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-neon-cyan focus:outline-none">
        </div>
        <button onclick="addFeed('{{ type_name }}')"
            class="px-5 py-2 bg-neon-cyan/20 text-neon-cyan border border-neon-cyan/30 rounded-lg hover:bg-neon-cyan/30 transition-colors text-sm font-medium whitespace-nowrap">
            + Add
        </button>
    </div>
</div>

<!-- Feed List -->
<div class="bg-cyber-card rounded-xl border border-gray-800/50 overflow-hidden">
    <table class="w-full">
        <thead class="bg-cyber-darker">
            <tr>
                <th class="px-4 py-3 text-left text-xs text-slate-400 uppercase tracking-wider">Source</th>
                <th class="px-4 py-3 text-center text-xs text-slate-400 uppercase tracking-wider w-24">Status</th>
                <th class="px-4 py-3 text-right text-xs text-slate-400 uppercase tracking-wider w-32">Last Fetched</th>
                <th class="px-4 py-3 text-right text-xs text-slate-400 uppercase tracking-wider w-20">Items</th>
                <th class="px-4 py-3 text-center text-xs text-slate-400 uppercase tracking-wider w-40">Actions</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-800/30">
            {% for feed in feeds %}
            <tr class="hover:bg-gray-800/20 transition-colors" id="feed-{{ feed.id }}">
                <td class="px-4 py-3">
                    <div class="text-white font-medium text-sm">{{ feed.name }}</div>
                    <div class="text-xs text-slate-500 truncate max-w-md" title="{{ feed.feed_url }}">{{ feed.feed_url }}</div>
                </td>
                <td class="px-4 py-3 text-center">
                    {% if feed.status == 'active' %}
                    <span class="status-badge px-2 py-0.5 rounded text-xs font-medium bg-emerald-600/20 text-emerald-400" data-status="active">Active</span>
                    {% elif feed.status == 'error' %}
                    <span class="status-badge px-2 py-0.5 rounded text-xs font-medium bg-red-600/20 text-red-400" data-status="error"
                        title="{{ feed.error_message or 'Unknown error' }}">Error</span>
                    {% else %}
                    <span class="status-badge px-2 py-0.5 rounded text-xs font-medium bg-slate-600/30 text-slate-400" data-status="inactive">Inactive</span>
                    {% endif %}
                </td>
                <td class="px-4 py-3 text-right text-xs text-slate-400">
                    {% if feed.last_fetched %}
                    {{ feed.last_fetched.strftime('%b %d, %H:%M') }}
                    {% else %}
                    <span class="text-slate-600">Never</span>
                    {% endif %}
                </td>
                <td class="px-4 py-3 text-right text-sm text-slate-300 font-mono">{{ feed.item_count }}</td>
                <td class="px-4 py-3 text-center">
                    <div class="flex gap-1.5 justify-center">
                        <button onclick="toggleFeed({{ feed.id }})"
                            class="px-2 py-1 text-xs rounded transition-colors
                            {% if feed.status == 'active' %}bg-slate-600/30 text-slate-300 hover:bg-slate-600/50{% else %}bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30{% endif %}">
                            {% if feed.status == 'active' %}Pause{% else %}Enable{% endif %}
                        </button>
                        <button onclick="testFeed({{ feed.id }})"
                            class="test-btn px-2 py-1 text-xs rounded bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 transition-colors">
                            Test
                        </button>
                        <button onclick="deleteFeed({{ feed.id }}, '{{ feed.name|e }}')"
                            class="px-2 py-1 text-xs rounded bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors">
                            Del
                        </button>
                    </div>
                </td>
            </tr>
            {% endfor %}
            {% if not feeds %}
            <tr>
                <td colspan="5" class="px-4 py-8 text-center text-slate-400">
                    No {{ type_name }} feeds configured. Add a URL above or click "Import from Files".
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
